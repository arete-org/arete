{
    "repo_notes": [
        {
            "content": "Footnote is a transparency- and provenance-focused AI framework, not a generic chat app. Its main product feature is inspectability: users should be able to see why an answer was produced, not just the answer itself.",
            "author": "Maintainer"
        },
        {
            "content": "Keep the landing page polished and curated. The Introduction page should feel editorial, not like a raw index dump, and it should explain how to navigate the rest of the wiki in plain language.",
            "author": "Maintainer"
        },
        {
            "content": "Use short menu titles wherever possible. Put nuance into purpose statements and page notes instead of long navigation labels.",
            "author": "Maintainer"
        },
        {
            "content": "Keep the wiki flow-first and junior-friendly. Prefer explaining one request moving through the system over listing isolated modules.",
            "author": "Maintainer"
        },
        {
            "content": "Repeat the package boundary rule throughout the wiki: web and discord-bot should integrate through backend HTTP APIs, not direct runtime imports from backend internals.",
            "author": "Maintainer"
        },
        {
            "content": "For pages about routes or data flow, prefer this shape: purpose, key concepts, how it works, ownership boundaries, typical flow, failure modes, and how to test.",
            "author": "Maintainer"
        },
        {
            "content": "Each page should include: Purpose, Key concepts, Ownership boundaries, Typical flow, Failure modes, How to test, and Related pages.",
            "author": "Maintainer"
        },
        {
            "content": "Treat docs freshness as part of the contract. If a PR changes route shapes, runtime schemas, provenance fields, trace behavior, or user-visible feature flows, the matching wiki page should be updated in the same PR.",
            "author": "Maintainer"
        },
        {
            "content": "Use screenshots selectively on user-facing pages such as Discord and Web features. One or two tightly cropped images are enough when they make the feature easier to understand.",
            "author": "Maintainer"
        }
    ],
    "pages": [
        {
            "title": "Introduction",
            "purpose": "Welcome a new contributor with a polished overview of what Footnote is, why provenance matters, how the wiki is organized, and what to read first.",
            "entrypoints": [
                "README.md",
                "cursor.rules",
                "AGENTS.md",
                "packages/backend/src",
                "packages/web/src",
                "packages/discord-bot/src"
            ],
            "page_notes": [
                {
                    "content": "Use this as the curated landing page. Include sections for what Footnote is, why it is different, how to read the wiki, a first-30-minutes walkthrough, and suggested reading paths.",
                    "author": "Maintainer"
                },
                {
                    "content": "Start here, then read Architecture, Glossary, and Provenance. Use Packages when you want to find where a feature lives in code.",
                    "author": "Maintainer"
                },
                {
                    "content": "Include a simple first-run path: start the backend, open the web app, trigger one reflect request, and inspect the resulting trace.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Foundations",
            "purpose": "Group the shared ideas that apply across the whole product: architecture, vocabulary, trace flow, provenance, and observability.",
            "entrypoints": [
                "README.md",
                "docs/api/openapi.yaml",
                "packages/contracts/src",
                "packages/backend/src",
                "packages/web/src",
                "packages/discord-bot/src"
            ],
            "page_notes": [
                {
                    "content": "Read this after Introduction. It should explain the shared ideas before readers dive into package-specific feature pages.",
                    "author": "Maintainer"
                },
                {
                    "content": "Keep this section concept-first. Save detailed feature tours for the Packages branch of the wiki.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Architecture",
            "purpose": "Explain the monorepo at a high level: what the backend, web app, Discord bot, and contracts package each do, and how they connect through the backend API.",
            "parent": "Foundations",
            "entrypoints": [
                "packages/backend/src",
                "packages/web/src",
                "packages/discord-bot/src",
                "packages/contracts/src",
                "docs/api/openapi.yaml"
            ],
            "page_notes": [
                {
                    "content": "Use this as the system map. Make the package boundary obvious: contracts define shared shapes, backend owns execution and validation, and web and Discord are backend API clients.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Glossary",
            "purpose": "Define the main Footnote terms in one place so the rest of the wiki stays easy to read.",
            "parent": "Foundations",
            "entrypoints": [
                "packages/contracts/src/ethics-core",
                "packages/contracts/src/web/types.ts",
                "docs/api/openapi.yaml"
            ],
            "page_notes": [
                {
                    "content": "Keep this page lightweight and definitional. Other pages should link back here instead of redefining common terms from scratch.",
                    "author": "Maintainer"
                },
                {
                    "content": "Include provenance, confidence, risk tier, tradeoff count, citations, chain hash, stale-after behavior, trace retrieval, and trace display.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Provenance",
            "purpose": "Explain why Footnote is different: answers are designed to be inspectable, traceable, and understandable to users.",
            "parent": "Foundations",
            "entrypoints": [
                "packages/contracts/src/ethics-core",
                "packages/backend/src/handlers/reflect.ts",
                "packages/backend/src/handlers/trace.ts",
                "packages/web/src/pages/TracePage.tsx",
                "packages/discord-bot/src/utils/response"
            ],
            "page_notes": [
                {
                    "content": "Explain both product meaning and engineering shape. A reader should understand why provenance exists before they read where the fields are stored or displayed.",
                    "author": "Maintainer"
                },
                {
                    "content": "Point readers to Trace Flow for the concrete end-to-end walkthrough.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Trace Flow",
            "purpose": "Walk through one reflect request from start to finish: request handling, trace creation, storage, retrieval, and display in the web app and Discord bot.",
            "parent": "Foundations",
            "entrypoints": [
                "packages/backend/src/handlers/reflect.ts",
                "packages/backend/src/handlers/trace.ts",
                "packages/web/src/utils/api.ts",
                "packages/web/src/pages/TracePage.tsx",
                "packages/discord-bot/src/api/traces.ts"
            ],
            "page_notes": [
                {
                    "content": "Keep this concrete. Use one worked example that shows how responseId, metadata, and trace retrieval connect across packages.",
                    "author": "Maintainer"
                },
                {
                    "content": "After this page, branch into the package-specific pages for Backend Reflect, Backend Traces, Discord Provenance, Web Reflect, and Web Traces.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Observability",
            "purpose": "Document how Footnote records operational context and model usage through structured logging, logging hygiene, and cost tracking.",
            "parent": "Foundations",
            "entrypoints": [
                "packages/discord-bot/src/utils/logger.ts",
                "packages/backend/src/utils/logger.ts",
                "packages/discord-bot/src/state/ChannelContextManager.ts",
                "AGENTS.md",
                "cursor.rules"
            ],
            "page_notes": [
                {
                    "content": "Focus on structured logging, privacy-aware log content, and where LLM costs are recorded and surfaced.",
                    "author": "Maintainer"
                },
                {
                    "content": "Include failure modes and where to look when debugging trace, provenance, or cost-accounting issues.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Packages",
            "purpose": "Group the major code areas by package so contributors can quickly find where features live and which surfaces they affect.",
            "entrypoints": [
                "packages/backend/src",
                "packages/contracts/src",
                "packages/discord-bot/src",
                "packages/web/src"
            ],
            "page_notes": [
                {
                    "content": "Use this section when you already know which product area you are working in. Keep package pages practical and feature-oriented.",
                    "author": "Maintainer"
                },
                {
                    "content": "Backend, Contracts, Discord, and Web should be hub pages that branch into concrete features such as traces, voice, images, incidents, embeds, and shared schemas.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Backend",
            "purpose": "Explain the backend package as the execution core of Footnote: request handling, validation, storage, tracing, and policy-aware server behavior.",
            "parent": "Packages",
            "entrypoints": [
                "packages/backend/src",
                "server.js",
                "docs/api/openapi.yaml"
            ],
            "page_notes": [
                {
                    "content": "Make it clear that the backend owns execution, persistence, and validation. Web and Discord should be described as clients of backend HTTP APIs.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Backend Reflect",
            "purpose": "Document the POST /api/reflect flow from request validation to model execution, metadata creation, and response formatting.",
            "parent": "Backend",
            "entrypoints": [
                "packages/backend/src/handlers/reflect.ts",
                "packages/contracts/src/web/types.ts",
                "packages/contracts/src/web/schemas.ts"
            ],
            "page_notes": [
                {
                    "content": "Use one worked example to show how a reflect request becomes an answer plus provenance metadata.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Backend Traces",
            "purpose": "Document how traces are validated, stored, retrieved, and expired in the backend.",
            "parent": "Backend",
            "entrypoints": [
                "packages/backend/src/handlers/trace.ts",
                "packages/backend/src/storage/traces/sqliteTraceStore.ts",
                "packages/backend/src/storage/traces/traceStoreUtils.ts",
                "packages/contracts/src/web/schemas.ts"
            ],
            "page_notes": [
                {
                    "content": "Focus on stale traces, missing traces, schema mismatch, store failures, and where those failures are logged or surfaced.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Incidents",
            "purpose": "Explain how incident records, audit events, and pseudonymized identifiers are stored and tested in the backend.",
            "parent": "Backend",
            "entrypoints": [
                "packages/backend/src/storage/incidents/sqliteIncidentStore.ts",
                "packages/backend/src/utils/pseudonymization.ts",
                "packages/backend/test/incidentStore.test.ts",
                "packages/backend/test/pseudonymization.test.ts"
            ],
            "page_notes": [
                {
                    "content": "Be clear about why Discord-facing identifiers are pseudonymized, where raw IDs must not appear, and how tests enforce those expectations.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Config",
            "purpose": "Document backend configuration loading, environment bootstrap, public config exposure, and failure behavior when config is incomplete.",
            "parent": "Backend",
            "entrypoints": [
                "packages/backend/src/bootstrapEnv.ts",
                "packages/backend/src/config.ts",
                "packages/backend/src/handlers/config.ts"
            ],
            "page_notes": [
                {
                    "content": "Explain which config is private, which config is exposed to clients, and where fail-open behavior is intentional.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Contracts",
            "purpose": "Document the shared metadata and API shapes in the contracts package, and show the difference between compile-time types and runtime schemas.",
            "parent": "Packages",
            "entrypoints": [
                "packages/contracts/src/ethics-core",
                "packages/contracts/src/web/types.ts",
                "packages/contracts/src/web/schemas.ts",
                "docs/api/openapi.yaml"
            ],
            "page_notes": [
                {
                    "content": "Use this page when you want the concrete code side of shared contracts. Keep Foundations focused on meaning, and use this page for where the shared shapes live in code.",
                    "author": "Maintainer"
                },
                {
                    "content": "Be explicit about the ownership split: OpenAPI defines the wire contract, shared TypeScript types document usage, and runtime schemas enforce data at runtime.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Discord",
            "purpose": "Explain the Discord bot package as the chat-first surface for Footnote, including responses, images, voice, and provenance features.",
            "parent": "Packages",
            "entrypoints": [
                "packages/discord-bot/src/index.ts",
                "packages/discord-bot/src/events",
                "packages/discord-bot/src/commands",
                "packages/discord-bot/src/api"
            ],
            "page_notes": [
                {
                    "content": "Keep this page practical. Describe what the bot can do for users before branching into specific features such as images, voice, responses, and provenance.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Responses",
            "purpose": "Document the core Discord response flow, from message intake and planner gating to response formatting and send behavior.",
            "parent": "Discord",
            "entrypoints": [
                "packages/discord-bot/src/events/MessageCreate.ts",
                "packages/discord-bot/src/utils/MessageProcessor.ts",
                "packages/discord-bot/src/utils/response/ResponseHandler.ts",
                "packages/discord-bot/src/utils/openaiService.ts"
            ],
            "page_notes": [
                {
                    "content": "Focus on the user-facing response path: when the bot chooses to respond, how catchup heuristics limit noise, and where formatting and provenance are attached.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Images",
            "purpose": "Document the Discord image-generation flow, including command handling, prompt/session state, upload behavior, and result delivery.",
            "parent": "Discord",
            "entrypoints": [
                "packages/discord-bot/src/commands/image.ts",
                "packages/discord-bot/src/commands/image",
                "packages/discord-bot/src/config/imageConfig.ts"
            ],
            "page_notes": [
                {
                    "content": "Include one cropped Discord screenshot that shows the image flow in context so the feature feels concrete before readers dive into the command code.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Voice",
            "purpose": "Document the Discord voice and realtime flow, including audio capture, playback, session management, and consent-sensitive behavior.",
            "parent": "Discord",
            "entrypoints": [
                "packages/discord-bot/src/voice/VoiceSessionManager.ts",
                "packages/discord-bot/src/voice/AudioCaptureHandler.ts",
                "packages/discord-bot/src/voice/AudioPlaybackHandler.ts",
                "packages/discord-bot/src/realtime/RealtimeAudioHandler.ts"
            ],
            "page_notes": [
                {
                    "content": "Include one screenshot or diagram that makes the voice experience tangible. Explain both the live user experience and the privacy-sensitive engineering concerns.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Provenance",
            "purpose": "Document how the Discord bot exposes transparency features such as provenance footers, interactions, and trace links to end users.",
            "parent": "Discord",
            "entrypoints": [
                "packages/discord-bot/src/api/traces.ts",
                "packages/discord-bot/src/utils/response/provenanceFooter.ts",
                "packages/discord-bot/src/utils/response/provenanceInteractions.ts",
                "packages/discord-bot/src/utils/response/metadata.ts"
            ],
            "page_notes": [
                {
                    "content": "Include one screenshot of the provenance footer or interaction surface. Make the user-facing story clear before explaining the trace API calls behind it.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Web",
            "purpose": "Explain the web package as the main browser surface for asking questions, inspecting traces, and browsing public content.",
            "parent": "Packages",
            "entrypoints": [
                "packages/web/src",
                "packages/web/src/App.tsx",
                "packages/web/src/utils/api.ts"
            ],
            "page_notes": [
                {
                    "content": "Keep this page user-facing. Describe what users can do in the web app before diving into individual pages and components.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Web Reflect",
            "purpose": "Document the web ask flow: how the UI sends reflect requests, displays answers, and exposes provenance cues in the browser.",
            "parent": "Web",
            "entrypoints": [
                "packages/web/src/components/AskMeAnything.tsx",
                "packages/web/src/components/AskPanel.tsx",
                "packages/web/src/utils/api.ts"
            ],
            "page_notes": [
                {
                    "content": "Include one screenshot of the ask-and-answer flow so readers can connect the components to the real user experience.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Web Traces",
            "purpose": "Document how the web app retrieves, renders, and explains trace data to users.",
            "parent": "Web",
            "entrypoints": [
                "packages/web/src/pages/TracePage.tsx",
                "packages/web/src/components/ProvenanceFooter.tsx",
                "packages/web/src/utils/api.ts"
            ],
            "page_notes": [
                {
                    "content": "Include one screenshot of the trace page and call out the key provenance fields users actually see.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Blog",
            "purpose": "Document the web blog experience, including list pages, post rendering, provenance display, and supporting fetch utilities.",
            "parent": "Web",
            "entrypoints": [
                "packages/web/src/pages/BlogListPage.tsx",
                "packages/web/src/pages/BlogPostPage.tsx",
                "packages/web/src/components/BlogPostCard.tsx",
                "packages/web/src/components/BlogProvenance.tsx",
                "packages/web/src/utils/blog.ts"
            ],
            "page_notes": [
                {
                    "content": "Keep this page lightweight. The blog is a secondary surface, so explain it clearly without letting it overshadow reflect, traces, and provenance.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "Embed",
            "purpose": "Document the embeddable web surface and how iframe sizing, hosting expectations, and external integrations work.",
            "parent": "Web",
            "entrypoints": [
                "packages/web/src/pages/EmbedPage.tsx",
                "packages/web/src/utils/api.ts"
            ],
            "page_notes": [
                {
                    "content": "Explain the user-facing embed experience, then describe the messaging and sizing behavior that make it work across host pages.",
                    "author": "Maintainer"
                }
            ]
        },
        {
            "title": "OpenAPI",
            "purpose": "Document how the authoritative OpenAPI spec connects to code, runtime schemas, and validation tooling across the repository.",
            "entrypoints": [
                "docs/api/openapi.yaml",
                "docs/api/openapi-code-linking.md",
                "scripts/validate-openapi-links.ts",
                "packages/contracts/src/web/types.ts",
                "packages/contracts/src/web/schemas.ts"
            ],
            "page_notes": [
                {
                    "content": "Be explicit about the split: openapi.yaml is the wire contract, code annotations and x-codeRefs help navigation, and runtime schemas enforce data at runtime.",
                    "author": "Maintainer"
                },
                {
                    "content": "Keep this top-level so contributors can find the API contract quickly from anywhere in the wiki.",
                    "author": "Maintainer"
                }
            ]
        }
    ]
}
