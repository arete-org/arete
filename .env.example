# Discord bot credentials (required)
DISCORD_TOKEN=
CLIENT_ID=
GUILD_ID=
OPENAI_API_KEY=

# Optional prompt configuration overrides
# Provide a path to a YAML file (copy packages/shared/prompts/defaults.yaml) to tweak prompts without redeploying.
PROMPT_CONFIG_PATH=

# Optional rate limiting overrides
RATE_LIMIT_USER=true
USER_RATE_LIMIT=5
USER_RATE_WINDOW_MS=60000
RATE_LIMIT_CHANNEL=true
CHANNEL_RATE_LIMIT=10
CHANNEL_RATE_WINDOW_MS=60000
RATE_LIMIT_GUILD=true
GUILD_RATE_LIMIT=20
GUILD_RATE_WINDOW_MS=60000

# Optional thread engagement controls
ALLOW_THREAD_RESPONSES=true # Set false to block replies in all threads unless in whitelist (ALLOWED_THREAD_IDS)
ALLOWED_THREAD_IDS= # Comma-separated thread IDs that stay enabled when thread replies are disabled

# Optional image generation overrides
IMAGE_DEFAULT_TEXT_MODEL=gpt-4.1-mini
IMAGE_DEFAULT_IMAGE_MODEL=gpt-image-1-mini
IMAGE_TOKENS_PER_REFRESH=10
IMAGE_TOKEN_REFRESH_INTERVAL_MS=86400000
# Provide a JSON map for convenience when tweaking several models at once
IMAGE_MODEL_MULTIPLIERS={"gpt-image-1":2,"gpt-image-1-mini":1}
# Or override individual models by replacing hyphens with underscores
IMAGE_MODEL_MULTIPLIER_GPT_IMAGE_1=2
IMAGE_MODEL_MULTIPLIER_GPT_IMAGE_1_MINI=1

# Optional channel context manager configuration
# Enable in-memory per-channel state tracking for engagement decisions and cost monitoring
CONTEXT_MANAGER_ENABLED=true # Enables rolling message buffers and metrics
CONTEXT_MANAGER_MAX_MESSAGES=50 # Number of recent messages to keep per channel
CONTEXT_MANAGER_RETENTION_MS=3600000 # How long to keep messages (1 hour = 3600000ms)
CONTEXT_MANAGER_EVICTION_INTERVAL_MS=300000 # Cleanup frequency (5 minutes = 300000ms)

# Optional trace storage configuration
TRACE_STORE_PATH= # Directory where response metadata traces are persisted (defaults to ./traces)

# Optional web server configuration
WEB_BASE_URL= # Base URL for the web server that hosts trace pages (required unless deploying with Fly.io)
